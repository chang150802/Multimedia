<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compress Images</title>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" type="image/x-icon" rel="stylesheet"
          href="./Capture/favicon.ico">
    <link rel="stylesheet" href="./static/css/Style.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <title>Image Compression</title>
    <style>
        .progress {
            width: 100%;
            background-color: #f1f1f1;
        }

        .bar {
            width: 0%;
            height: 30px;
            background-color: #4CAF50;
            text-align: center;
            line-height: 30px;
            color: white;
        }
    </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">COMPRESS IMAGES </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<!--                    <li class="nav-item">-->
<!--                        <a class="nav-link active" aria-current="page" href="/">Home</a>-->
<!--                    </li>-->
                    <li class="nav-item">
                        <a class="nav-link" href="flip">Nén Ảnh </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/">Chỉnh sửa ảnh </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/edit">Chuyển đổi ảnh</a>
                    </li>
                            <li class="nav-item">
                        <a class="nav-link" href="/remove">Các công cụ khác </a>
                    </li>


                </ul>
            </div>
        </div>
    </nav>
  <div class="main">
    <h1>Image Compression</h1>

    <!-- Upload form -->
    <h2>Upload Image</h2>
    <form action="/compress" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" required><br><br>
        <button type="submit">Tải lên</button>

    </form>

    <!-- Display Original Image -->
    {% if filename %}
    <h2>Original Image</h2>
    <img src="/static/uploads/{{ filename }}"  alt="Original Image">

    <!-- Download Button -->
    <form action="/download/{{ filename }}">
        <br>
        <button type="submit" class="btn btn-success">Download</button>
    </form>

    <!-- Compress Options -->
    <h2>Compress Options</h2>
    <form action="/compress/<filename>" method="post">
         <label for="qualityInput">Quality (1-100):</label>
        <input type="number" id="qualityInput" name="quality" value="10" min="1" max="100">
        <br><br>
        <div class="slidecontainer">
            <input type="range" name="quality" min="1" max="100" value="10" class="slider" id="qualityRange">

        <p>Quality: <span id="qualityValue">{{quality}}</span></p><br>
        <div class="progress">
            <div class="progress-bar" id="progressBar">{{quality}}</div>
        </div><br>
        <button type="submit" class="btn btn-success">Compress</button>
    </form>
    {% endif %}

    <!-- Display Compressed Image -->
    {% if compress_image %}
    <h2>Compressed Image</h2>
    <img src="/static/uploads/{{ compress_image }}" alt="Compressed Image">

    <!-- Download Compressed Image Button -->
    <form action="/download/{{ compress_image }}">
        <br>
        <button type="submit" class="btn btn-success">Download Compressed</button>

    </form>
    {% endif %}

    <!-- JavaScript to update quality value -->
    <script>
        var slider = document.getElementById("qualityRange");
        var output = document.getElementById("qualityValue");
        output.innerHTML = slider.value;

        slider.oninput = function() {
            output.innerHTML = this.value;
        }
    </script>
      </div>
</body>
</html>
<style>
.main {
  background-image: url("./static/images/anhnen.jpg");
  max-width: 200%;
  height: auto;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
  background-position: center;
  position: relative;
}
</style>