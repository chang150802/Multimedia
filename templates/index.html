<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Compression</title>
    <style>
        .progress {
            width: 100%;
            background-color: #f1f1f1;
        }

        .bar {
            width: 0%;
            height: 30px;
            background-color: #4CAF50;
            text-align: center;
            line-height: 30px;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Image Compression</h1>
    <h2>Upload Image</h2>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <input type="file" name="file" id="fileInput" accept=".jpg, .jpeg, .png"><br><br>
        <label for="qualityInput">Quality (1-100):</label>
        <input type="number" id="qualityInput" name="quality" value="10" min="1" max="100">
        <br><br>
        <div class="slidecontainer">
            <input type="range" min="1" max="100" value="10" class="slider" id="qualityRange">
        </div>
        <br><br>
        <input type="submit" value="Upload and Compress">
    </form>
    <br>
    <div class="progress">
        <div id="progressBar" class="bar"></div>
    </div>

    <div id="resultSection" style="display: none;">
        <h2>Compressed Image</h2>
        <img id="compressedImage" src="#" alt="Compressed Image"><br><br>
        <a id="downloadLink" href="#" download="compressed_image.jpg">Download Compressed Image</a>
    </div>

    <script>
        var qualityRange = document.getElementById('qualityRange');
        var qualityInput = document.getElementById('qualityInput');
        qualityRange.oninput = function() {
            qualityInput.value = this.value;
        };

        qualityInput.onchange = function() {
            qualityRange.value = this.value;
        };
    </script>
</body>
</html>